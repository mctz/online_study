{"version":3,"sources":["uni-app:///main.js","webpack:///E:/Workspaces/uniapp_workspace/gdxy/pages/main/videoView.vue?7705","webpack:///E:/Workspaces/uniapp_workspace/gdxy/pages/main/videoView.vue?1111","webpack:///E:/Workspaces/uniapp_workspace/gdxy/pages/main/videoView.vue?61e8","webpack:///E:/Workspaces/uniapp_workspace/gdxy/pages/main/videoView.vue?e11b","uni-app:///pages/main/videoView.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;AACnB;AACA,oG;AACAA,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AACqL;AACrL,gBAAgB,8LAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAmrB,CAAgB,wsBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;ACYvsB;AACA,MADA,kBACA;AACA;AACA,gBADA;AAEA,gBAFA;AAGA,oBAHA;AAIA,kBAJA;AAKA,kBALA;AAMA,kBANA;AAOA,oBAPA;AAQA,iBARA;AASA,mBATA;AAUA,oBAVA;AAWA,gCAXA;;AAaA,GAfA;AAgBA,SAhBA,qBAgBA;AACA;AACA,qDAFA;AAGA,GAnBA;AAoBA,QApBA,kBAoBA,MApBA,EAoBA;AACA,iBADA,GACA,aADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDATA;AAUA,iDAVA;AAWA,2EAXA;;AAaA,+BAbA,GAaA,mCAbA;AAcA,eAdA,GAcA,CAdA,eAcA,4BAdA;AAeA,0GAfA;AAgBA,iEAhBA,6CAcA,GAdA;;;;AAoBA,oEApBA;AAqBA,8DArBA;;AAuBA;AACA;AACA;AACA,eA1BA;AA2BA,GA/CA;AAgDA,mBAhDA,+BAgDA;AACA,8DADA;AAEA;AACA,wCAHA;AAIA,GApDA;AAqDA,UArDA,sBAqDA;AACA;AACA,GAvDA;AAwDA;AACA;AACA;AACA,6BADA;AAEA,wBAFA;;AAIA;AACA;AACA,KARA;AASA,YATA,sBASA;AACA,2BADA,GACA,sDADA;AAEA;AACA;AACA,uBADA,GACA,YADA;AAEA;AACA;AACA;AACA;AACA;AACA,iBAVA;AAWA,KApBA;AAqBA;AACA;AACA,gCADA;AAEA,yBAFA;;AAIA,KA1BA;AA2BA;AACA;AACA;AACA,KA9BA;AA+BA;AACA;AACA,KAjCA;AAkCA;;;;;AAKA,qBAvCA,+BAuCA;AACA,mKADA;AAEA;AACA;AACA,iBAJA;AAKA,KA5CA;AA6CA,cA7CA,sBA6CA,KA7CA,EA6CA;AACA;AACA;AACA;AACA,KAjDA,EAxDA,E","file":"pages/main/videoView.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/main/videoView.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./videoView.vue?vue&type=template&id=421740a3&\"\nvar renderjs\nimport script from \"./videoView.vue?vue&type=script&lang=js&\"\nexport * from \"./videoView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/main/videoView.vue\"\nexport default component.exports","export * from \"-!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./videoView.vue?vue&type=template&id=421740a3&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./videoView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\devTools\\\\HBuilderX-alpha\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./videoView.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"content\">\r\n\t\t<video id=\"myVideo\" :src=\"webUrl\" :initial-time=\"initTime-4<0?0:initTime-4\" :danmu-list=\"danmuList\" @ended=\"ended\" @timeupdate=\"timeupdate\"\r\n\t\t\t style=\"width: 100%;\" autoplay=\"true\" enable-danmu danmu-btn controls></video>\r\n\t\t<view class=\"input-row border\" style=\"width: 100%;height: 30px;padding-top: 20px;\">\r\n\t\t\t<input v-model=\"danmuValue\" class=\"uni-input\" type=\"text\" placeholder=\"在此处输入弹幕内容\"  style=\"width: 80%;font-size: 15px;\"/>\r\n\t\t\t<button @click=\"sendDanmu\" style=\"font-size: 15px;padding-bottom: 5px;text-align: center;\">发 送</button>\r\n\t\t</view>\r\n\t</view>\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t    data() {\r\n\t        return {\r\n\t            webUrl: '',\r\n\t\t\t\tmateId:'',\r\n\t\t\t\tsyllabusId:'',\r\n\t\t\t\tcourseId:'',\r\n\t\t\t\tlearnTime:0,\r\n\t\t\t\ttotalTime:0,\r\n\t\t\t\tcurrentTime:0,\r\n\t\t\t\tinitTime:0,\r\n\t            danmuList: [],\r\n\t            danmuValue: '',\r\n\t\t\t\timgUrl:this.$store.imgUrl,\r\n\t        }\r\n\t    },\r\n\t    async onReady() {\r\n\t        this.videoContext = uni.createVideoContext('myVideo')\r\n\t\t\tthis.videoContext.requestFullScreen();\r\n\t    },\r\n\t\tasync onLoad(option) {\r\n\t\t\tvar url = option.webUrl;\r\n\t\t\tif(!url.startsWith(\"http\")){\r\n\t\t\t\turl = this.imgUrl + url;\r\n\t\t\t}\r\n\t\t\tthis.webUrl = url;\r\n\t\t\tthis.courseId = option.courseId;\r\n\t\t\tthis.mateId = option.mateId;\r\n\t\t\tthis.totalTime = option.totalTime;\r\n\t\t\tthis.syllabusId = option.syllabusId;\r\n\t\t\tif(!uni.getStorageSync(\"studyProgress\")){\r\n\t\t\t\tawait this.loadJs.reloadStudyProgress(this.$store.baseInfoId);\r\n\t\t\t}\r\n\t\t\tvar studyProgressList = uni.getStorageSync(\"studyProgress\");\r\n\t\t\tfor(var i=0;i<studyProgressList.length;i++){\r\n\t\t\t\tif(studyProgressList[i].course == this.courseId && studyProgressList[i].mate == this.mateId){\r\n\t\t\t\t\tthis.initTime = studyProgressList[i].currentTime;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!uni.getStorageSync(\"barrageInfo_\"+this.syllabusId)){\r\n\t\t\t\tawait this.loadJs.reloadBarrage(this.syllabusId);\r\n\t\t\t}\r\n\t\t\tthis.getDanmu();\r\n\t\t\tif(this.debugLevel>1){\r\n\t\t\t\tconsole.log(\"initTime:\"+this.initTime);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onPullDownRefresh() {\r\n\t\t\tawait this.loadJs.reloadBarrage(this.syllabusId);\r\n\t\t\tthis.getDanmu();\r\n\t\t\tuni.stopPullDownRefresh();\r\n\t\t},\r\n\t\tonUnload(){\r\n\t\t\tthis.saveStudyProgress();\r\n\t\t},\r\n\t    methods: {\r\n\t        sendDanmu: function() {\r\n\t            this.videoContext.sendDanmu({\r\n\t                text: this.danmuValue,\r\n\t                color: '#FFFFFF'\r\n\t            });\r\n\t\t\t\tthis.loadJs.saveBarrage(uni.getStorageSync(\"userInfo\").resourceid,this.mateId,this.currentTime,this.danmuValue);\r\n\t\t\t\tthis.danmuValue = '';\r\n\t        },\r\n\t\t\tasync getDanmu(){\r\n\t\t\t\tvar barrageInfo = uni.getStorageSync(\"barrageInfo_\"+this.syllabusId);\r\n\t\t\t\tfor(var index=0;index<barrageInfo.length;index++){\r\n\t\t\t\t\tif(barrageInfo[index].mate===this.mateId){\r\n\t\t\t\t\t\tvar obj = new Object;\r\n\t\t\t\t\t\tobj.color = \"#bababa\";\r\n\t\t\t\t\t\tobj.text = barrageInfo[index].content;\r\n\t\t\t\t\t\tobj.time = Math.floor(barrageInfo[index].sendTime);\r\n\t\t\t\t\t\tthis.danmuList[index] = obj;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t        videoErrorCallback: function(e) {\r\n\t            uni.showModal({\r\n\t                content: e.target.errMsg,\r\n\t                showCancel: false\r\n\t            })\r\n\t        },\r\n\t\t\tonHide: function(){\r\n\t\t\t\tthis.loadJs.saveStudyProgress(this.learnTime,this.totalTime,this.currentTime,this.$store.baseInfoId,this.courseId,this.mateId)\r\n\t\t\t\tconsole.log(\"onHide\");\r\n\t\t\t},\r\n\t\t\tended: function(event){\r\n\t\t\t\tthis.loadJs.saveStudyProgress(this.learnTime,this.totalTime,this.currentTime,this.$store.baseInfoId,this.courseId,this.mateId)\r\n\t\t\t},\r\n\t\t\t/* onBackPress(event) {\r\n\t\t\t\t//小程序不支持\r\n\t\t\t\tthis.saveStudyProgress();\r\n\t\t\t\tconsole.log(event);\r\n\t\t\t}, */\r\n\t\t\tasync saveStudyProgress(){\r\n\t\t\t\tawait this.loadJs.saveStudyProgress(this.learnTime,this.totalTime,this.currentTime,this.$store.baseInfoId,this.courseId,this.mateId)\r\n\t\t\t\tif(this.debugLevel>1){\r\n\t\t\t\t\tconsole.log(\"saveStudyProgress:\"+this.learnTime+\";\"+this.currentTime);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttimeupdate(event){\r\n\t\t\t\tlet detail = event.detail;\r\n\t\t\t\tthis.currentTime = detail.currentTime;\r\n\t\t\t\tthis.learnTime += 0.25;\r\n\t\t\t}\r\n\t    }\r\n\t}\r\n</script>"],"sourceRoot":""}